!!!
%html
  %head
    %title ShakaLimestone

    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}
    %meta{name: 'viewport', content: "width=device-width, initial-scale=1"}
    %meta{'http-equiv': 'x-ua-compatible', content: 'ie=edge'}
    = action_cable_meta_tag
    = tag :meta, name: "stripe-key", content: Rails.application.secrets.stripe_publishable_key

    / These do use turbolinks 5
    = env_stylesheet_link_tag(static: 'application_static', |
      hot: 'application_non_webpack',                       |
      media: 'all',                                         |
      'data-turbolinks-track' => "reload")                  |

    / These do not use turbolinks, so no data-turbolinks-track
    / This is to load the hot assets.
    = env_javascript_include_tag(hot: ['http://localhost:3500/vendor-bundle.js', |
      'http://localhost:3500/app-bundle.js'])                                    |

    // External JS required by our application JS
    = javascript_include_tag 'https://js.stripe.com/v2/', 'data-turbolinks-track' => true

    / These do use turbolinks 5
    = env_javascript_include_tag(static: 'application_static', |
      hot: 'application_non_webpack',                          |
      'data-turbolinks-track' => "reload")                     |

    = csrf_meta_tags
  %body{ turbolinks? }
    = render user_signed_in? ? 'layouts/navbar_signedin' : 'layouts/navbar'
    .container
      - flash.each do |name, msg|
        - if msg.is_a?(String)
          .alert.alert-dismissible.fade.in{class: "alert-#{name}", role: "alert"}
            %button.close{type: "button", 'data-dismiss': "alert", 'aria-label': "Close"}
              %span{'aria-hidden': true} &times;
            = msg
      = yield
